# EXECUTE ESTES COMANDOS NO CLOUD SHELL (onde voc칡 j치 fez o clone):

# 1. Navegar para o diret칩rio (se ainda n칚o estiver)
cd DeltaCFOAgent

# 2. Remover Dockerfile temporariamente para usar Buildpacks autom치tico
mv Dockerfile Dockerfile.backup

# 3. Deploy com Buildpacks (mais simples)
gcloud run deploy deltacfoagent \
  --source . \
  --platform managed \
  --region southamerica-east1 \
  --allow-unauthenticated \
  --memory 2Gi \
  --cpu 2 \
  --port 8080 \
  --timeout 300 \
  --max-instances 100 \
  --set-env-vars="DB_TYPE=postgresql,DB_HOST=34.39.143.82,DB_PORT=5432,DB_NAME=delta_cfo,DB_USER=delta_user,DB_SOCKET_PATH=/cloudsql/aicfo-473816:southamerica-east1:delta-cfo-db,FLASK_ENV=production" \
  --set-cloudsql-instances="aicfo-473816:southamerica-east1:delta-cfo-db" \
  --set-secrets="DB_PASSWORD=db_password_sa:latest,ANTHROPIC_API_KEY=ANTHROPIC_API_KEY:latest" \
  --project=aicfo-473816

# 4. Ap칩s deploy, testar
SERVICE_URL=$(gcloud run services describe deltacfoagent --region southamerica-east1 --project=aicfo-473816 --format="value(status.url)")
echo "游깷 Service URL: $SERVICE_URL"
curl $SERVICE_URL/health

# RESULTADO ESPERADO:
# {"status": "healthy", "database": "PostgreSQL", "version": "2.0"}